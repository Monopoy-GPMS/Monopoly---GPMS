name: Build Executavel Windows (Monopoly)

on:
  push:
    branches:
      - main
      - feature/setup-actions
  workflow_dispatch:

jobs:
  build_exe:
    # Continuamos usando Ubuntu, mas a Action executa o build para Windows.
    runs-on: ubuntu-latest 

    steps:
    - name: 1. Checkout do Repositório
      uses: actions/checkout@v4

    - name: 2. Build do Executável Windows (Cross-compilation)
      uses: cdrx/pyinstaller-windows-exe@v2
      with:
        # Caminho para o seu arquivo principal
        path: main.py 
        # Comando PyInstaller (o "pyinstaller" inicial é omitido)
        spec: >
          --onefile 
          --windowed 
          --name "MonopolyPython" 
          --add-data "assets;assets" 
          main.py
        # Instala as dependências a partir do seu arquivo
        requirements: requirements.txt

    - name: 3. Upload do Artefato (.exe)
      uses: actions/upload-artifact@v4
      with:
        name: monopoly-exe-${{ github.sha }}
        # O arquivo de saída desta Action é sempre dist/MonopolyPython.exe
        path: dist/MonopolyPython.exe